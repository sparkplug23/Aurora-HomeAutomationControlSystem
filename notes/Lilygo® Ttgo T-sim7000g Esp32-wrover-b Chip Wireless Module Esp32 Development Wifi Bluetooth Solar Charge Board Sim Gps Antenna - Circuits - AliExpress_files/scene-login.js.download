(window["webpackJsonp-ae-fe/cosmos-1"]=window["webpackJsonp-ae-fe/cosmos-1"]||[]).push([[25,26],{109:function(e,t,n){"use strict";var r=n(57),o=n.n(r);t.a={loginApi:"//thirdparty.aliexpress.com/user/api/loginByOAuthCode.do",getConfigApi:"//login.aliexpress.com/join/loginDisplayConfig.htm",msiteLoginUrl:"//login.aliexpress.com/h5.htm",thirdpartyURL:"//thirdparty.aliexpress.com/login.htm?type={loginType}&from=msite&return_url={returnUrl}",clientId:{google:"438567566819-3k1nk9qd1vr39c42rmjr0dh24ngth0s4.apps.googleusercontent.com"},extra:{agreementUrl:"//www.aliexpress.com/p/account-legacy/index.html?lang=".concat(o.a.getLocale(),"&type=membership"),policyUrl:"//www.aliexpress.com/p/account-legacy/index.html?lang=".concat(o.a.getLocale(),"&type=privacy")}}},251:function(e,t,n){},353:function(e,t,n){"use strict";n.r(t),n.d(t,"doLogin",(function(){return ne})),n.d(t,"canAutoLogin",(function(){return oe})),n.d(t,"autoLogin",(function(){return ae})),n.d(t,"popupLogin",(function(){return ie})),n.d(t,"logout",(function(){return ce})),n.d(t,"isInAbTest",(function(){return ue}));n(68),n(251),n(163),n(62);var r=n(51),o=n.n(r),a=n(20),i=n.n(a),c=n(53),u=n.n(c),s=n(52),l=n.n(s),p=n(943),g=n(944),f=n(125),b=n(58),d=["prefixCls","visible","mobile","content","type"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.prefixCls,n=e.visible,r=e.mobile,c=void 0!==r&&r,s=e.content,w=e.type,m=u()(e,d),v=Object(a.useContext)(b.a),O=v.getPrefixCls,h=v.mobile,_=O("toast",t),x=c||h,j={success:i.a.createElement(p.a,{className:l()("".concat(_,"-icon"),"".concat(_,"-icon-success"))}),error:i.a.createElement(g.a,{className:l()("".concat(_,"-icon"),"".concat(_,"-icon-error"))})},k=w&&j[w];return i.a.createElement(f.a,y(y({},m),{},{visible:n,mask:!1,needClassName:!1,needTemplate:!1,closable:!1,scrollLock:!1,customizePrefixCls:_,destroyOnClose:!0,wrapClassName:l()(o()({},"".concat(_,"-center"),x))}),!x&&k?k:null,s)};m.displayName="Toast";var v=m,O=n(164);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={};var j={show:function(e){var t,n,r,o="string"==typeof e?{content:e}:e;return x.timeout&&(null===(t=x)||void 0===t||null===(n=t.destroy)||void 0===n||n.call(t),clearTimeout(null===(r=x)||void 0===r?void 0:r.timeout)),(x=Object(O.a)(_(_({},o),{},{autoDestroy:!0}),a.createElement(v,null))).timeout=setTimeout((function(){var e,t;null===(e=x)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),x.timeout=0}),1e3*(e.duration||3)),x},hide:function(){var e,t;return x?null===(e=x)||void 0===e||null===(t=e.destroy)||void 0===t?void 0:t.call(e):void 0}},k=j,L=n(0),P=n.n(L),T=n(1),C=n.n(T),D=n(34),U=n.n(D),S=n(8),A=n(18),N=n(74),I=n(12),E=n(92),M=n(109),J=n(161),K=n(98),R=n(165),q=n(57),z=n.n(q);function B(e){try{return JSON.parse(window.sessionStorage.getItem(e))}catch(e){return console.error(e),!1}}function V(e,t){try{return window.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){return console.error(e),!1}}var Y,F=(Y=B("global-is-new-user"),!("true"===Object(E.a)("global-is-new-user")&&!Y||(V("global-is-new-user","true"),Object(E.b)("global-is-new-user","true"),0))),G=function(){if("true"!==B("global-user-show")){var e=Number(B("global-user-step")||0);return(document.referrer||"").indexOf("aliexpress.")>-1||(F?e>=2:!document.referrer||e>=2)}},H=function(){V("global-user-show","true")},Q=function(){V("global-user-step",Number(B("global-user-step")||0)+1)},W=function(){var e=P()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.google){e.next=3;break}return e.next=3,U()({url:"https://accounts.google.com/gsi/client",type:"script"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){try{var e,t;null!==(e=window)&&void 0!==e&&null!==(t=e._global_header_namespace_)&&void 0!==t&&t.refreshLogin&&window._global_header_namespace_.refreshLogin(),window.getUserLoginMsg&&window.getUserLoginMsg({data:[{}]})}catch(e){}},Z={google:{popupLogin:function(){var e=P()(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(),!z.a.isLoggedIn()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,W();case 5:if(n="google"===Object(E.a)("sns-thirdparty-login"),t||n||G()){e.next=9;break}return e.abrupt("return");case 9:try{r=+new Date>+(Object(E.a)("sns-autologin-faigue")||0),window.google.accounts.id.initialize({client_id:M.a.clientId.google,auto_select:r,callback:function(e){Object(N.a)({ae_button_type:"google_onetap_login_try"}),ne(e.credential,{returnUrl:window.location.href,onSuccess:function(){Object(E.b)("sns-thirdparty-login","google"),Object(N.b)({exp_trigger:"",exp_type:"google_onetap_login_success",exp_attribute:"refer=".concat(window.location.href)}),Object(N.a)({ae_button_type:"google_onetap_login_success"}),X()}})}}),window.google.accounts.id.prompt((function(e){e.isDisplayed()&&(r&&Object(E.b)("sns-autologin-faigue",+new Date+3e5),H(),Object(N.b)({exp_trigger:"",exp_type:"google_onetap_login_show",exp_attribute:"refer=".concat(window.location.href)})),e.isNotDisplayed()&&Object(N.a)({ae_button_type:"google_onetap_login_not_show"}),e.isSkippedMoment()&&Object(N.b)({exp_trigger:"",exp_type:"google_onetap_login_close",exp_attribute:"refer=".concat(window.location.href)})}))}catch(e){Object(N.a)({ae_button_type:"google_onetap_login_error"})}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=P()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:window.google.accounts.id.disableAutoSelect(),Object(E.b)("deny-google-autologin","1");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},$=S.util.tracker,ee=function(){var e=P()(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U()({url:M.a.loginApi,data:{token:t.token,snsType:"google_onetap",redirectUri:t.returnUrl},withCredentials:!0,method:"post"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=P()(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return U()({url:e,type:"script",withCredentials:!0})})),r=new Promise((function(e){setTimeout((function(){e(null)}),5e3)})),e.next=4,Promise.race([Promise.all(n).catch((function(e){console.log(e)})),r]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=P()(C.a.mark((function e(t,n){var r,o,a,i,c,u,s,l,p,g;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.returnUrl,o=n.onSuccess,e.next=3,ee({token:t,returnUrl:r});case 3:if(!(a=e.sent).success){e.next=19;break}if("SYNC_DOMAIN_COOKIE"!==(c=null==a||null===(i=a.module)||void 0===i?void 0:i.actionType)){e.next=16;break}return l=null==a||null===(u=a.module)||void 0===u||null===(s=u.actionParams)||void 0===s?void 0:s.tokenLoginUrl,e.next=10,te(l);case 10:if(!Object(K.a)()||!Object(K.b)()){e.next=15;break}return Object(N.b)({exp_trigger:"",exp_type:"google_onetap_login_success",exp_attribute:"refer=".concat(window.location.href)}),Object(N.a)({ae_button_type:"google_onetap_login_success"}),Object(R.a)(l),e.abrupt("return");case 15:o&&o();case 16:"REDIRECT"===c&&(window.location.href=null==a||null===(p=a.module)||void 0===p?void 0:p.redirectUrl),e.next=20;break;case 19:k.show({content:null==a||null===(g=a.errorCode)||void 0===g?void 0:g.displayMessage,type:"error"});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(E.a)("sns-thirdparty-login")||"";return e||"google"},oe=function(){var e=re(),t=Z[e];return!(null==t||!t.canAutoLogin)&&t.canAutoLogin()},ae=function(){var e=re(),t=Z[e];null!=t&&t.autoLogin&&t.autoLogin()},ie=function(e){var t=re(),n=Z[t];null!=n&&n.popupLogin&&n.popupLogin(e)},ce=function(){var e=re(),t=Z[e];null!=t&&t.logout&&t.logout()},ue=function(){var e=P()(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.request({api:"mtop.aliexpress.account.mtop.abTest",v:"1.0",appKey:"24815441",timeout:3e3,type:"POST",dataType:"json",data:{component:"page@45",module:Object(I.a)("__loginAbTest")||"1663813719127",variationIntKey:"isNewPage"}});case 2:return t=e.sent,n=t.data,$.exp({exp_page:"googlesdk-ab-login",UTABTest:Object(J.a)(n.dataTracks)}),e.abrupt("return","1"==="".concat(n.intVariationValue));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},951:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),c=n(57),u=n.n(c),s=n(353);t.default=function(){var e=o()(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.a.isLoggedIn()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(s.isInAbTest)();case 5:if(!e.sent){e.next=8;break}n=(t||{}).forcePopupLogin,Object(s.popupLogin)(n);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}}]);