

<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	<meta charset="utf-8">
	<meta name="theme-color" content="#222222">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAGACGAAAAFgAAAIlQTkcNChoKAAAADUlIRFIAAAAQAAAAEAgGAAAAH/P/YQAAAE1JREFUOI1j/P//PwOxgNGeAUMxE9G6cQCKDWAhpADZ2f8PMjBS3QW08QK20KaZC2gfC9hCnqouoNgARgY7zMxAyNlUdQHlXiAlO2MDAD63EVqNHAe0AAAAAElFTkSuQmCC"/>
    <title>DEVICENAME</title>
    <script>function feedback(){}</script>
        
    <style>
        div,fieldset,input{
            padding:5px;
            font-size:1em;
        }
        fieldset{
            background:#000000;
        }
        input{
            width:100%;
            box-sizing:border-box;
            -webkit-box-sizing:border-box;
            -moz-box-sizing:border-box;
            background:#000000;
            color:#ffffff;
        }
        
        input[type=checkbox],input[type=radio]{
            width:1em;
            margin-right:6px;
            vertical-align:-1px;
        }
        select{
            padding: 5px;
            font-size: 1em;
            width:100%;
            background:#000000;
            color:#ffffff;
        }

        textarea{
            resize:none;
            width:98%;
            height:318px;
            padding:5px;
            overflow:auto;
            background:#000000;
            color:#ffffff;
        }
        body{
            text-align:center;
            font-family:verdana;
            background:#000000;
        }
        td{
            padding:0px;
        }

        .button_hac{
            border:0;
            border-radius:0.3rem;
            background:#4d8d90;
            color:#000000;
            line-height:2.4rem;
            font-size:1.2rem;
            width:100%;
            -webkit-transition-duration:0.4s;
            transition-duration:0.4s;
            cursor:pointer;
        }
        .button_hac:hover{
            background:#31595b;
        }
        .bred{
            background:#d43535;
        }
        .bred:hover{
            background:#931f1f;
        }
        .bgrn{
            background:#47c266;
        }
        .bgrn:hover{
            background:#5aaf6f;
        }
        .bora{
            background:#ec7d1f;
        }
        .bora:hover{
            background:#7a4111;
        } 
        .bform1{
            width:33%;
            line-height:1.7rem
        }

        a{
            text-decoration:none;
        }
        .p{
            float:left;
            text-align:left;
            }
        .q{
            float:right;
            text-align:right;
        }
        .tb_it {
            display: table-cell;
            padding: 25px 50px;
            text-align: center;
        }
        .palette{
            background:black;
            height:30px;
        }
        .palette_title{
            background:black;
            height:30px;
        }
        .palette{
            padding:0px;
            display:inline-block;
        }
        .rgb_pal{
            width:100%;
            height:20px;
        }
        textarea{
            resize:none;
            width:98%;
            height:318px;
            padding:5px;
            overflow:auto;
            background:#1f1f1f;
            color:#4bb7e6;
        }
        #debug_line{   
            position: fixed;
            bottom: 0;
            left: 0;
        }
        .tab-label {
            margin: 0 0 -5px 0;
            padding-bottom: 4px;
        }
        
        .icons {
            font-family: 'WIcons';
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            display: inline-block;
            margin: -2px 0 4px 0;
        }
        .wrapper {
            position: fixed;
            padding: 1px;
            top: 0;
            left: 0;
            right: 0;
            background: var(--c-tb);
            z-index: 1;
        }
    </style>
    <style>
        #snackbar {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom:30px;
        }
        #snackbar.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @-webkit-keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        @-webkit-keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }

        @font-face {
            font-family: "WIcons";
            src: url(data:application/x-font-woff;charset=utf-8;base64,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) format('woff');
        }

        :root {
            --c-1: #111;
            --c-f: #fff;
            --c-2: #222;
            --c-3: #333;
            --c-4: #444;
            --c-5: #555;
            --c-6: #666;
            --c-8: #888;
            --c-b: #bbb;
            --c-c: #ccc;
            --c-e: #eee;
            --c-d: #ddd;
            --c-r: #831;
            --t-b: 0.5;
            --c-o: rgba(34, 34, 34, 0.9);
            --c-tb : rgba(34, 34, 34, var(--t-b));
            --c-tba: rgba(102, 102, 102, var(--t-b));
            --c-tbh: rgba(51, 51, 51, var(--t-b));
            --th: 70px;
            --tp: 70px;
            --bh: 63px;
            --tbp: 14px 14px 10px 14px;
            --bbp: 9px 0 7px 0;
            --bhd: none;
            --bmt: 0px;
        }

        html {
            touch-action: manipulation;
        }
        body {
            margin: 0;
            background-color: var(--c-1);
            font-family: Helvetica, Verdana, sans-serif;
            font-size: 17px;
            color: var(--c-f);
            text-align: center;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        html,
        body {
            height: 100%;
            width: 100%;
            position: fixed;
            overscroll-behavior: none;
        }

        #bg {
            height: 100vh;
            width: 100vw;
            position: fixed;
            z-index: -10;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            opacity: 0;
            transition: opacity 2s;
        }

        p {
            margin: 10px 0 2px 0;
            color: var(--c-d);
        }

        button {
            outline: none;
            cursor: pointer;
        }

        .labels {
            margin: 0;
            padding: 8px 0 2px 0;
        }

        #namelabel {
            position: fixed;
            bottom: calc(var(--bh) + 5px);
            right: 4px;
            color: var(--c-6);
            writing-mode: vertical-rl;
        }

        .bri {
            padding: 4px;
        }


        .huge {
            font-size: 42px;
        }

        .infot {
            table-layout: fixed;
            width: 100%;
        }


        .keytd {
            text-align: left;
            padding-bottom: 8px;
        }

        .valtd {
            text-align: right;
            padding-bottom: 8px;
        }

        .slider-icon
        {
            transform: translate(6px,3px);
            color: var(--c-d);
        }

        .e-icon
        {
            transform: translateY(3px);
            color: var(--c-d);
        }

        .sel-icon {
            transform: translateX(3px);
            color: var(--c-d);
        }

        .flr {
            float: right;
            cursor: pointer;
            margin: 0;
            color: var(--c-f);
            transform: rotate(0deg);
            transition: transform 0.3s;
        }

        .exp {
            transform: rotate(180deg);
        }

        .il {
            display: inline-block;
            vertical-align: middle;
        }

        #liveview {
            height: 4px;
            display: none;
            width: 100%;
            border: 0px;
        }

        .tab {
            background-color: transparent;
            color: var(--c-d);
        }

        .bot {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--c-tb);
        }

        .tab button {
            background-color: transparent;
            float: left;
            border: none;
            transition: color 0.3s, background-color 0.3s;
            font-size: 17px;
            color: var(--c-c);
        }

        .top button {
            padding: var(--tbp);
        }											 

        .bot button {
            padding: var(--bbp);
            width:25%;
        }

        .tab button:hover {
            background-color: var(--c-tbh);
            color: var(--c-e);
        }

        .tab button.active {
            background-color: var(--c-tba) !important;
            color: var(--c-f);
        }

        .active {
            background-color: var(--c-6) !important;
            color: var(--c-f);
        }

        .container {
            --n: 1;
            width: 100%;
            width: calc(var(--n)*100%);
            height: calc(100% - var(--tp) - var(--bh));
            margin-top: var(--tp);
            transform: translate(calc(var(--tx, 0px) + var(--i, 0)/var(--n)*-100%));
            overscroll-behavior: none;
        }

        .tabcontent {
            float: left;
            position: relative;
            width: 100%;
            width: calc(100%/var(--n));
            padding: 11px 0;
            box-sizing: border-box;
            border: 0px;
            overflow: auto;
            height: 100%;
            overscroll-behavior: none;
        }

        #Effects {
            padding-top: 0;
            margin-top: 11px;
            height: calc(100% - 11px);
        }

        .smooth { transition: transform	calc(var(--f, 1)*.5s) ease-out }

        .tab-label {
            margin: 0 0 -5px 0;
            padding-bottom: 4px;
        }

        .overlay {
            position: fixed;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
            background-color: var(--c-3);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 11;
            opacity: 0.95;
            transition: 0.7s;
            pointer-events: none;
        }

        .staytop {
            display: block;
            position: -webkit-sticky;
            position: sticky;
            background: var(--c-1);
            top: -1px;
            z-index: 1;
            margin-top: 1px;
            width: 274px;
            margin: auto;
            border-radius: 25px;
        }

        #staytop1 {
            top: 28px;
        }

        #staytop2 {
            top: 56px;
        }

        #fxb0 {
            margin-bottom: 2px;
        }

        .first {
            margin-top: 18px !important;
        }

        #toast {
            opacity: 0;
            background-color: var(--c-5);
            max-width: 90%;
            color: var(--c-f);
            text-align: center;
            border-radius: 5px;
            padding: 16px;
            position: fixed;
            z-index: 5;
            left: 50%;
            transform: translateX(-50%);
            bottom: calc(var(--bh) + 22px);
            font-size: 17px;
            pointer-events: none;
        }

        #toast.show {
            opacity: 1;
            animation: fadein2 0.5s, fadein2 0.5s 2.5s reverse;
        }

        #toast.error {
            opacity: 1;
            background-color: #b21;
            animation: fadein2 0.5s;
        }

        .modal {
            position:fixed;
            left: 0px;
            bottom: 0px;
            right: 0px;
            top: calc(var(--th) - 1px);
            background-color: var(--c-o);
            transform: translateY(100%);
            transition: transform 0.4s;
            padding: 8px;
            font-size: 20px;
            overflow: auto;
        }

        #info {
            z-index: 3;
        }

        #rover {
            z-index: 2;
        }

        #roverstar {
            position: fixed;
            top: calc(var(--th) + 5px);
            left: 1px;
            display: none;
            cursor: pointer;
        }


        #imgw {
            width: 200px;
            height: 55px;
            display: inline-block;
        }

        #kv {
            max-width: 490px;
            display: inline-block;
        }

        #lv {
            max-width: 600px;
            display: inline-block;
        }

        img {
            max-width: 100%;
            max-height: 100%;
        }

        @keyframes fadein2 {
            from {bottom: 0; opacity: 0;}
            to {bottom: calc(var(--bh) + 22px); opacity: 1;}
        }

        .sliderdisplay {
            content:'';
            position: absolute;
            top: 13px; bottom: 13px;
            left: 10px; right: 10px;
            background: var(--c-4);
            border-radius: 17px;
            pointer-events: none;
            z-index: -1;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 220px;
            padding: 0px;
            margin: 0px 10px 0px 10px;
            background-color: transparent;
            cursor: pointer;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 30px;
            cursor: pointer;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            height: 16px;
            width: 16px;
            border-radius: 17px;
            background: var(--c-f);
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: 7px;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 30px;
            background-color: rgba(0, 0, 0, 0);
        }
        input[type=range]::-moz-range-thumb {
            border: 0px solid rgba(0, 0, 0, 0);
            height: 16px;
            width: 16px;
            border-radius: 17px;
            background: var(--c-f);
            transform: translateY(7px);
        }
        input[type=range]::-ms-track {
            width: 100%;
            height: 30px;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }
        input[type=range]::-ms-fill-lower {
            background: transparent;
        }
        input[type=range]::-ms-fill-upper {
            background: transparent;
        }
        input[type=range]::-ms-thumb {
            height: 16px;
            width: 16px;
            border-radius: 16px;
            background: var(--c-f);
            margin-top: -12px;
        }

        #wwrap {
            display: none;
        }

        .sliderwrap {
            height: 30px;
            width: 240px;
            position: relative;
        }

        .sws {
            width: 212px;
        }

        .sis {
            width: 192px !important;
        }

        .hd {
            display: var(--bhd);
        }

        #briwrap {
            float: left;
            margin-top: var(--bmt);
            
        }
        .btnwrap{
            float:right;
        }

        #picker {
            margin: 10px auto;
            width: 260px;
            filter: drop-shadow(0px 0px 1px #000);
        }

        #rgbwrap {
            display: none;
        }

        .btn {
            padding: 8px;
            margin: 10px;
            width: 230px;
            font-size: 19px;
            background-color: var(--c-3);
            color: var(--c-f);
            border: 0px solid white;
            border-radius: 25px;
            filter: drop-shadow(0px 0px 1px #000);
            transition-duration: 0.5s;
            -webkit-backface-visibility: hidden;
            -webkit-transform:translate3d(0,0,0);
        }

        .btn-s {
            padding: 9px;
            width: 276px;
            background-color: var(--c-2);
        }
        .btn-i {
            padding-bottom: 3px;
        }
        .btn-icon {
            margin: 0px 8px 4px 0;
            vertical-align: middle;
        }
        .btna-icon {
            margin: 0px;
        }

        #qcs-w {
            margin-top: 10px;
        }
        .qcs {
            padding: 14px;
            margin: 2px;
            border-radius: 14px;
            display: inline-block;
        }
        .qcsb {
            padding: 13px;
            border: 1px solid var(--c-f);
        }
        #hexw {
            margin-top: 5px;
            display: none;
        }

        .cl {
            width: 42px;
        }

        /* select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='white'><polygon points='0,0 100,0 50,50'/></svg>") no-repeat;
            background-size: 12px;
            background-position: 206px 16px;
            padding-left: 12px !important;
            background-repeat: no-repeat;
            outline: none;
        }
        select:-moz-focusring {
            transition-duration: 0s;
            color: transparent;
            text-shadow: 0 0 0 #fff;
        } */
        option {
            background-color: var(--c-3);
            color: var(--c-f);
        }

        input[type=number], input[type=text] {
            background: var(--c-3);
            color: var(--c-f);
            border: 0px solid white;
            border-radius: 5px;
            padding: 8px;
            margin: 6px 6px 6px 0;
            font-size: 19px;
            transition: background 0.2s;
            outline: none;
            width: 50px;
            -webkit-appearance: textfield;
                -moz-appearance: textfield;
                            appearance: textfield;
        }

        input[type=text] {
            width: 100px;
            border-radius: 25px;
            text-align: center;
        }

        input[type=number]:focus, input[type=text]:focus {
            background: var(--c-6);
        }

        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none;
        }


        .ic {
            padding: 6px 0 0 0;
        }

        .xxs {
            width: 40px;
            margin: 6px;
        }

        .rect {
            border-radius: 5px;
        }

        .psts {
            background-color: var(--c-2);
            color: var(--c-8);
            cursor: default;
        }
        .stored {
            background-color: var(--c-3);
            color: var(--c-f);
            cursor: pointer;
        }
        .saving {
            background-color: var(--c-3);
            color: var(--c-f);
            cursor: pointer;
        }
        .stored.saving {
            background-color: var(--c-r);
            color: var(--c-f);
        }

        .cnf {
            position: absolute;
            top: 66px;
            right: 28px;
            color: var(--c-f);
            cursor: pointer;
            background: var(--c-3);
            padding: 43px 6px;
            border-radius: 5px;
        }

        .pwr {
            color: var(--c-6); 
            transform: translate(2px, 3px);
            cursor: pointer;
        }

        .act {
            color: var(--c-f);
        }

        .half {
            padding: 6px 6px;
            top: 64px;
        }

        .del {
            position: absolute;
            bottom: 8px;
            right: 8px;
            color: var(--c-f);
            cursor: pointer;
        }

        .check {
            display: inline-block;
            position: relative;
            padding-bottom: 32px;
            margin-bottom: 14px;
            cursor: pointer;
            text-align: center;
        }

        .schkl {
            padding: 2px 22px 0px 35px;
            margin-bottom: 0px;
        }

        .revchkl {
            padding: 2px 0px 0px 35px;
            margin-bottom: 0px;
            margin-top: 8px;
        }

        .check input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        .checkmark {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: var(--c-3);
            border-radius: 5px;
        }

        .schk {
            top: 0;
        }

        .psv {
            left: initial;
            bottom: initial;
            top: 0;
            right: 0;
        }

        .psvl {
            padding: 2px 35px 10px 0px;
            margin-top: 10px;
            margin-bottom: 0px;
        }


        .check:hover input ~ .checkmark {
            background-color: var(--c-4);
        }

        .check input:checked ~ .checkmark {
            background-color: var(--c-6);
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .check input:checked ~ .checkmark:after {
            display: block;
        }

        .check .checkmark:after {
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid var(--c-f);
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        .h {
            font-size: 13px;
            text-align: center;
            color: var(--c-b);
        }

        .bp {
            margin-bottom: 5px;
        }


        .expanded {
            display: block;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent; 
        }
        ::-webkit-scrollbar-thumb {
            background: var(--c-sb);
            opacity: 0.2;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--c-sbh);
        }

        @media all and (max-width: 550px) and (min-width: 374px) {
            .infobtn {
                width: 155px;
            }
        }

        @media all and (max-width: 685px) {
            .top button {
                width: 16.6%;
                padding: 8px 0 4px 0;
            }
            .hd {
                display: none !important;
            }
            #briwrap {
                margin-top: 0px !important;
                float: none;
            }
        }

        @media all and (max-width: 1249px) {
            #buttonPcm {
            display: none;
            }
        }
    </style>
</head>
<body onload="onLoad()">

<!-- <div id="cv" class="overlay">Loading WLED UI...</div> -->
<noscript><div class="overlay" style="opacity:1;">Sorry, WLED UI needs JavaScript!</div></noscript>
<div id="bg"></div>

<div class="wrapper" id="top">
	<div class="tab top">
		<div id="briwrap">            
            <span class="tb_it"></span>
            <span class="tb_it"></span> 
        </div>
		<div class="btnwrap">
            <button onclick="window.location.href = '/PAGEconsole';"><i class="icons">&#xe410;</i><p class="tab-label">Console</p></button>
			<button onclick="window.location.href = '/settings';"><i class="icons">&#xe0a2;</i><p class="tab-label">Settings</p></button>
            </div>
		<iframe id="liveview" src="about:blank"></iframe>
	</div>
</div>


<div class ="container">
    
	<div id="Colors" class="tabcontent">
        
        <div style="text-align:left;display:inline-block;min-width:340px">
            <div style="text-align:center;">
                <h2>
                    <div class="page_title"></div>
                </h2>
            </div>
            <div id="l1" name="l1">
                <table style="width:100%"></table>
            </div>
            <div class="container_1"></div>
            <div class="container_2"></div>
            <div class="container_3"></div>
            <div class="container_4"></div>
            <div class="container_5"></div>
            <div class="container_6"></div>
            <div class="container_7"></div>

            <form>
                <select name="pal_set" id="pal_set" onchange="send_value(id);">
                    <optgroup label="User Editable">
                        <option value="0">User00</option>
                        <option value="1">User01</option>
                        <option value="2">User02</option>
                    </optgroup>
                    <optgroup label="Preset">
                        <option value="20">Shelf Hearts</option>
                        <option value="21">Holloween Orange-Purple</option>
                    </optgroup>
                </select>
            </form>



            <div id="snackbar"></div>
            <div style="text-align:right;font-size:11px;">
                <hr>
                <a href="https://github.com/sparkplug23/HomeAutomationControlSystem" target="_blank" style="color:#ffffff;">Home Automation Control System (HACS) <span class="row_version_data">VERSION</span></a>
            </div>
            <div class="debug_line">Debug Info..</div>
        </div>

	</div>
	<div id="ConsolePreview" class="tabcontent">
		<p id="psLabel" class="labels">Load from slot</p>
	</div>
</div>

<div class="tab bot" id="bot">
	<button class="tablinks" onclick="openTab(2)"><i class="icons">&#xe34b;</i><p class="tab-label">Status</p></button>
	<button class="tablinks" onclick="openTab(3)"><i class="icons">&#xe34b;</i><p class="tab-label">Console Preview</p></button>
</div>

<div id="toast"></div>
<div id="namelabel"></div>
<div id="info" class="modal">
	<div id="imgw">
		<img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAggAAACMCAYAAAAZQlGEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKLSURBVHhe7dgxjtwwEADBpf//5zUDwklnpzFAnKoSTigNFTT0AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGDcOieX+G5nvNLaznil6f1Nv+/tz3c7+3tmen/Tpu/jbe877c85AQD+EQgAQAgEACAEAgAQAgEACIEAAIRAAABCIAAAIRAAgBAIAEAIBAAgBAIAEAIBAAiBAACEQAAAQiAAACEQAIAQCABACAQAINY5+aHvdsYRazvjK9jfM7fvz/0+Y3+/2+336w8CABACAQAIgQAAhEAAAEIgAAAhEACAEAgAQAgEACAEAgAQAgEACIEAAIRAAABCIAAAIRAAgBAIAEAIBAAgBAIAEAIBAAiBAADEOudrfLczXmltZ3yF6fuwv2em9+d+n5ne3zT3cZfp+/AHAQAIgQAAhEAAAEIgAAAhEACAEAgAQAgEACAEAgAQAgEACIEAAIRAAABCIAAAIRAAgBAIAEAIBAAgBAIAEAIBAAiBAACEQAAAYp3zNb7bGUes7Yz8wO334fmeuf35bmd/z9y+v9ufzx8EACAEAgAQAgEACIEAAIRAAABCIAAAIRAAgBAIAEAIBAAgBAIAEAIBAAiBAACEQAAAQiAAACEQAIAQCABACAQAIAQCABACAQCIdc4x3+2MV1rbGfmFpr+/6e/l9ue73fT+pt1+H2/bn+/lGX8QAIAQCABACAQAIAQCABACAQAIgQAAhEAAAEIgAAAhEACAEAgAQAgEACAEAgAQAgEACIEAAIRAAABCIAAAIRAAgBAIAEAIBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgP/u8/kLYCqAxINTyZkAAAAASUVORK5CYII=">
	</div><br>
<div id="kv">Loading...</div><br>
<button class="btn infobtn" onclick="requestJson(null)">Refresh</button>
<button class="btn infobtn" onclick="toggleInfo()">Close Info</button><br>
<button class="btn infobtn" onclick="openGH()">WLED Wiki</button>
<button class="btn infobtn" id="resetbtn" onclick="cnfReset()">Reboot WLED</button><br>

</div>

<div id="rover" class="modal">
	<i class="icons huge">&#xe410;</i><br>
	<div id="lv">?</div><br><br>
	To use built-in effects, use an override button below.<br>
	You can return to realtime mode by pressing the star in the top left corner.<br>
	<button class="btn" onclick="setLor(1)">Override once</button>
	<button class="btn" onclick="setLor(2)">Override until reboot</button><br>
</div>
<i id="roverstar" class="icons huge" onclick="setLor(0)">&#xe410;</i><br>
<script>
/*!imgw
 * iro.js v4.4.0
 * 2016-2019 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */

 //page js
var loc = false, locip;
var ps = false, noNewSegs = false;
var isOn = false, nlA = false, isLv = false, isInfo = false, syncSend = false, syncTglRecv = true, isRgbw = false;
var whites = [0,0,0];
var expanded = [false];
var powered = [true];
var nlDur = 60, nlTar = 0;
var nlFade = false;
var selectedFx = 0;
var csel = 0;
var savedPresets = 0;
var currentPreset = -1;
var lastUpdate = 0;
var segCount = 0, ledCount = 0, lowestUnused = 0, maxSeg = 0, lSeg = 0;
var pcMode = false, pcModeA = false, lastw = 0;
var d = document;
// const ranges = RangeTouch.setup('input[type="range"]', {});
var lastinfo = {};
var cfg = {
	theme:{base:"dark", bg:{url:""}, alpha:{bg:0.6,tab:0.6}, color:{bg:""}},
	comp :{colors:{picker: true, rgb: false, quick: true, hex: false}, labels:true, pcmbot:false}
};

// var cpick = new iro.ColorPicker("#picker", {
// 	width: 260,
// 	wheelLightness: false
// });

function handleVisibilityChange() {
	if (!document.hidden && new Date () - lastUpdate > 3000) {
		requestJson(null);
	}
}

function sCol(na, col) {
	d.documentElement.style.setProperty(na, col);
}

function applyCfg()
{
	cTheme(cfg.theme.base === "light");
	var bg = cfg.theme.color.bg;
	if (bg) sCol('--c-1', bg);
	var ccfg = cfg.comp.colors;
	d.getElementById('hexw').style.display = ccfg.hex ? "block":"none";
	d.getElementById('picker').style.display = ccfg.picker ? "block":"none";
	d.getElementById('rgbwrap').style.display = ccfg.rgb ? "block":"none";
	d.getElementById('qcs-w').style.display = ccfg.quick ? "block":"none";
	var l = cfg.comp.labels;
	var e = d.querySelectorAll('.tab-label');
	for(var i=0; i<e.length; i++)
		e[i].style.display = l ? "block":"none";
	e = d.querySelector('.hd');
	e.style.display = l ? "block":"none";
	sCol('--tbp',l ? "14px 14px 10px 14px":"10px 22px 4px 22px");
	sCol('--bbp',l ? "9px 0 7px 0":"10px 0 4px 0");
	sCol('--bhd',l ? "block":"none");
	sCol('--bmt',l ? "0px":"5px");
	sCol('--t-b', cfg.theme.alpha.tab);
	size();
	localStorage.setItem('wledUiCfg', JSON.stringify(cfg));
}

function tglHex()
{
	cfg.comp.colors.hex = !cfg.comp.colors.hex;
	applyCfg();
}

function tglTheme()
{
	cfg.theme.base = (cfg.theme.base === "light") ? "dark":"light";
	applyCfg();
}

function tglLabels()
{
	cfg.comp.labels = !cfg.comp.labels;
	applyCfg();
}

function cTheme(light) {
	if (light) {
	sCol('--c-1','#eee');
	sCol('--c-f','#000');
	sCol('--c-2','#ddd');
	sCol('--c-3','#bbb');
	sCol('--c-4','#aaa');
	sCol('--c-5','#999');
	sCol('--c-6','#999');
	sCol('--c-8','#888');
	sCol('--c-b','#444');
	sCol('--c-c','#333');
	sCol('--c-e','#111');
	sCol('--c-d','#222');
	sCol('--c-r','#c42');
	sCol('--c-o','rgba(204, 204, 204, 0.9)');
	sCol('--c-sb','#0003'); sCol('--c-sbh','#0006');
	sCol('--c-tb','rgba(204, 204, 204, var(--t-b))');
	sCol('--c-tba','rgba(170, 170, 170, var(--t-b))');
	sCol('--c-tbh','rgba(204, 204, 204, var(--t-b))');
	d.getElementById('imgw').style.filter = "invert(0.8)";
	} else {
	sCol('--c-1','#111');
	sCol('--c-f','#fff');
	sCol('--c-2','#222');
	sCol('--c-3','#333');
	sCol('--c-4','#444');
	sCol('--c-5','#555');
	sCol('--c-6','#666');
	sCol('--c-8','#888');
	sCol('--c-b','#bbb');
	sCol('--c-c','#ccc');
	sCol('--c-e','#eee');
	sCol('--c-d','#ddd');
	sCol('--c-r','#831');
	sCol('--c-o','rgba(34, 34, 34, 0.9)');
	sCol('--c-sb','#fff3'); sCol('--c-sbh','#fff5');
	sCol('--c-tb','rgba(34, 34, 34, var(--t-b))');
	sCol('--c-tba','rgba(102, 102, 102, var(--t-b))');
	sCol('--c-tbh','rgba(51, 51, 51, var(--t-b))');
	d.getElementById('imgw').style.filter = "unset";
	}
}

function loadBg(iUrl) {
	let bg = document.getElementById('bg');
	let img = document.createElement("img");
	img.src = iUrl;
	img.addEventListener('load', (event) => {
		var a = parseFloat(cfg.theme.alpha.bg);
		d.getElementById('staytop2').style.background = "transparent";
		if (isNaN(a)) a = 0.6;
		bg.style.opacity = a;
		bg.style.backgroundImage = `url(${iUrl})`;
		img = null;
	});
}

function onLoad() {
	if (window.location.protocol == "file:") {
	loc = true;
	locip = localStorage.getItem('locIp');
	if (!locip)
	{
		locip = prompt("File Mode. Please enter WLED IP!");
		localStorage.setItem('locIp', locip);
	}
	}
	var sett = localStorage.getItem('wledUiCfg');
	if (sett) cfg = mergeDeep(cfg, JSON.parse(sett));
	
	applyCfg();
	loadBg(cfg.theme.bg.url);
	
	var cd = d.getElementById('csl').children;
	for (i = 0; i < cd.length; i++) {
		cd[i].style.backgroundColor = "rgb(0, 0, 0)";
	}
	selectSlot(0);
	updateTablinks(0);
	resetUtil();
	// cpick.on("input:end", function() {
	// 	setColor(1);
	// });
	setTimeout(function(){requestJson(null, false)}, 25);
	d.addEventListener("visibilitychange", handleVisibilityChange, false);
	size();
	d.getElementById("cv").style.opacity=0;
	if (localStorage.getItem('pcm') == "true") togglePcMode(true);
}

function updateTablinks(tabI)
{
	tablinks = d.getElementsByClassName("tablinks");
	for (i = 0; i < tablinks.length; i++) {
		tablinks[i].className = tablinks[i].className.replace(" active", "");
	}
	if (pcMode) return;
	tablinks[tabI].className += " active";
}

function openTab(tabI, force = false) {
	if (pcMode && !force) return;
	var i, tabcontent, tablinks;
	iSlide = tabI;
	_C.classList.toggle('smooth', false);
	_C.style.setProperty('--i', iSlide);
	updateTablinks(tabI);
}

var timeout;
function showToast(text, error = false) {
	var x = d.getElementById("toast");
	x.innerHTML = text;
	x.className = error ? "error":"show";
	clearTimeout(timeout);
	x.style.animation = 'none';
	x.offsetHeight;
	x.style.animation = null; 
	timeout = setTimeout(function(){ x.className = x.className.replace("show", ""); }, 2900);
}

function showErrorToast() {
	showToast('Connection to light failed!', true);
}
function clearErrorToast() {
	d.getElementById("toast").className = d.getElementById("toast").className.replace("error", "");
}

function getRuntimeStr(rt)
{
	var t = parseInt(rt);
	var days = Math.floor(t/86400);
	var hrs = Math.floor((t - days*86400)/3600);
	var mins = Math.floor((t - days*86400 - hrs*3600)/60);
	var str = days ? (days + " " + (days == 1 ? "day" : "days") + ", ") : "";
	str += (hrs || days) ? (hrs + " " + (hrs == 1 ? "hour" : "hours")) : "";
	if (!days && hrs) str += ", ";
	if (t > 59 && !days) str += mins + " min";
	if (t < 3600 && t > 59) str += ", ";
	if (t < 3600) str += (t - mins*60) + " sec"; 
	return str;
}

function inforow(key, val, unit = "")
{
	return `<tr><td class="keytd">${key}</td><td class="valtd">${val}${unit}</td></tr>`;
}

function populateInfo(i)
{
	var cn="";
	var heap = i.freeheap/1000;
	heap = heap.toFixed(1);
	var pwr = i.leds.pwr;
	var pwru = "Not calculated";
	if (pwr > 1000) {pwr /= 1000; pwr = pwr.toFixed((pwr > 10) ? 0 : 1); pwru = pwr + " A";}
	else if (pwr > 0) {pwr = 50 * Math.round(pwr/50); pwru = pwr + " mA";}
	var urows="";
	for (var k in i.u)
	{
		var val = i.u[k];
		if (val[1]) {
			urows += inforow(k,val[0],val[1]);
		} else {
			urows += inforow(k,val);
		}
	}
	var vcn = "Kuuhaku";
	if (i.ver.startsWith("0.10.")) vcn = "Namigai";
	if (i.ver.startsWith("0.11.")) vcn = "Akatsuki";
	if (i.cn) vcn = i.cn;
	
	cn += `v${i.ver} "${vcn}"<br><br><table class="infot">
	${urows}
	${inforow("Build",i.vid)}
	${inforow("Signal strength",i.wifi.signal +"% ("+ i.wifi.rssi, " dBm)")}
	${inforow("Uptime",getRuntimeStr(i.uptime))}
	${inforow("Free heap",heap," kB")}
	${inforow("Estimated current",pwru)}
	${inforow("MAC address",i.mac)}
	${inforow("Environment",i.arch + " " + i.core + " (" + i.lwip + ")")}
	</table>`;
	d.getElementById('kv').innerHTML = cn;
}


function updateTrail(e, slidercol)
{
	if (e==null) return;
	var progress = e.value *100 /255;
	progress = parseInt(progress);
	var scol;
	switch (slidercol) {
	case 1: scol = "#f00"; break;
	case 2: scol = "#0f0"; break;
	case 3: scol = "#00f"; break;
	default: scol = "var(--c-f)";
	}
	var val = `linear-gradient(90deg, ${scol} ${progress}%, var(--c-4) ${progress}%)`;
	e.parentNode.getElementsByClassName('sliderdisplay')[0].style.background = val;
}

function updateUI()
{
	d.getElementById('buttonPower').className = (isOn) ? "active":"";
	d.getElementById('buttonNl').className = (nlA) ? "active":"";
	d.getElementById('buttonSync').className = (syncSend) ? "active":"";

	d.getElementById('fxb' + selectedFx).style.backgroundColor = "var(--c-6)";
	updateTrail(d.getElementById('sliderBri'));
	updateTrail(d.getElementById('sliderSpeed'));
	updateTrail(d.getElementById('sliderIntensity'));
	updateTrail(d.getElementById('sliderW'));
	if (isRgbw) d.getElementById('wwrap').style.display = "block";
	
	var btns = document.getElementsByClassName("psts");
	for (i = 0; i < btns.length; i++) {
		btns[i].className = btns[i].className.replace(" active", "");
		if ((savedPresets >> i) & 0x01) btns[i].className += " stored";
	}
	if (currentPreset > 0 && currentPreset <= btns.length) btns[currentPreset -1].className += " active";

	spal = d.getElementById("selectPalette");
	spal.style.backgroundColor = (spal.selectedIndex > 0) ? "var(--c-6)":"var(--c-3)";
	updateHex();
	updateRgb();
}

function displayRover(i,s)
{
	d.getElementById('rover').style.transform = (i.live && s.lor == 0) ? "translateY(0px)":"translateY(100%)";
	var sour = i.lip ? i.lip:""; if (sour.length > 2) sour = " from " + sour;
	d.getElementById('lv').innerHTML = `WLED is receiving live ${i.lm} data${sour}`;
	d.getElementById('roverstar').style.display = (i.live && s.lor) ? "block":"none";
}

function compare(a, b) {
	if (a.name < b.name){
		return -1;
	}
	return 1;
}
var jsonTimeout;
var reqC = 0;
function requestJson(command, rinfo = true, verbose = true) {
	lastUpdate = new Date();
	if (!jsonTimeout) jsonTimeout = setTimeout(showErrorToast, 3000);
	var req = null;
	e1 = d.getElementById('fxlist');
	e2 = d.getElementById('selectPalette');

	url = rinfo ? '/json/si': (command ? '/json/state':'/json');
	if (loc) {
		url = `http://${locip}${url}`;
	}
	
	type = command ? 'post':'get';
	if (command)
	{
		command.v = verbose;
		req = JSON.stringify(command);
	}
	fetch
	(url, {
		method: type,
		headers: {
			"Content-type": "application/json; charset=UTF-8"
		},
		body: req
	})
	.then(res => {
		if (!res.ok) {
			 showErrorToast();
		}
		return res.json();
	})
	.then(json => {
		clearTimeout(jsonTimeout);
		jsonTimeout = null;
		clearErrorToast();
		if (!json) showToast('Empty response', true);
		if (json.success) return;
		var s = json;
		if (!command || rinfo) {
		if (!rinfo) {
		var x='',y='<option value="0">Default</option>';
		json.effects.shift(); //remove solid
		for (i in json.effects) json.effects[i] = {id: parseInt(i)+1, name:json.effects[i]};
		json.effects.sort(compare);
		for (i in json.effects) {
		x += `<button class="btn${(i==0)?" first":""}" id="fxb${json.effects[i].id}" onclick="setX(${json.effects[i].id});">${json.effects[i].name}</button><br>`;
		}

		json.palettes.shift(); //remove default
		for (i in json.palettes) json.palettes[i] = {"id": parseInt(i)+1, "name":json.palettes[i]};
		json.palettes.sort(compare);
		for (i in json.palettes) {
		y += `<option value="${json.palettes[i].id}">${json.palettes[i].name}</option>`;
		}
		e1.innerHTML=x; e2.innerHTML=y;
		}
		
			var info = json.info;
			var name = info.name;
			d.getElementById('namelabel').innerHTML = name;
			if (name === "Dinnerbone") d.documentElement.style.transform = "rotate(180deg)";
			if (info.live) name = "(Live) " + name;
		if (loc) name = "(L) " + name;
			d.title = name;
			isRgbw = info.leds.wv;
			ledCount = info.leds.count;
			syncTglRecv = info.str;
			maxSeg = info.leds.maxseg;
		lastinfo = info;
		if (isInfo) populateInfo(info);
			s = json.state;
			displayRover(info, s);
		}
		isOn = s.on;
		d.getElementById('sliderBri').value= s.bri;
		nlA = s.nl.on;
		nlDur = s.nl.dur;
	nlTar = s.nl.tbri;
	nlFade = s.nl.fade;
		syncSend = s.udpn.send;
		savedPresets = s.pss;
		currentPreset = s.ps;
		d.getElementById('cyToggle').checked = (s.pl < 0) ? false : true;
		d.getElementById('cycs').value = s.ccnf.min;
		d.getElementById('cyce').value = s.ccnf.max;
		d.getElementById('cyct').value = s.ccnf.time /10;
		d.getElementById('cyctt').value = s.transition /10;
		
		var selc=0; var ind=0;
		// populateSegments(s);
		// for (i in s.seg)
		// {
		// 	if(s.seg[i].sel) {selc = ind; break;} ind++;
		// }
		var i=s.seg[selc];
		if (!i) {
			showToast('No Segments!', true);
			updateUI();
			return;
		}
		var cd = d.getElementById('csl').children;
		for (e = 2; e >= 0; e--)
		{
			cd[e].style.backgroundColor = "rgb(" + i.col[e][0] + "," + i.col[e][1] + "," + i.col[e][2] + ")";
			if (isRgbw) whites[e] = parseInt(i.col[e][3]);
			selectSlot(csel);
		}
		d.getElementById('sliderSpeed').value = whites[csel];

		d.getElementById('sliderSpeed').value = i.sx;
		d.getElementById('sliderIntensity').value = i.ix;

		d.getElementById('fxb' + selectedFx).style.backgroundColor = "var(--c-3)";
		selectedFx = i.fx;
		e2.value = i.pal;
		if (!command) d.getElementById('Effects').scrollTop = d.getElementById('fxb' + selectedFx).offsetTop - d.getElementById('Effects').clientHeight/1.8;

		if (s.error) showToast('WLED error ' + s.error, true);
		updateUI();
	})
	.catch(function (error) {
		showToast(error, true);
	    console.log(error);
	})
}

function togglePower() {
	isOn = !isOn;
	var obj = {"on": isOn};
	obj.transition = parseInt(d.getElementById('cyctt').value*10);
	requestJson(obj);
}

function toggleNl() {
	nlA = !nlA;
	if (nlA)
	{
		showToast(`Timer active. Your light will turn ${nlTar > 0 ? "on":"off"} ${nlFade ? "over":"after"} ${nlDur} minutes.`);
	} else {
		showToast('Timer deactivated.');
	}
	var obj = {"nl": {"on": nlA}};
	requestJson(obj);
}

function toggleSync() {
	syncSend = !syncSend;
	if (syncSend)
	{
		showToast('Other lights in the network will now sync to this one.');
	} else {
		showToast('This light and other lights in the network will no longer sync.');
	}
	var obj = {"udpn": {"send": syncSend}};
	if (syncTglRecv) obj.udpn.recv = syncSend;
	requestJson(obj);
}

function toggleLiveview() {
	isLv = !isLv;
	d.getElementById('liveview').style.display = (isLv) ? "block":"none";
	var url = loc ? `http://${locip}/liveview`:"/liveview";
	d.getElementById('liveview').src = (isLv) ? url:"about:blank";
	d.getElementById('buttonSr').className = (isLv) ? "active":"";
	size();
}

function toggleInfo() {
	isInfo = !isInfo;
	if (isInfo) populateInfo(lastinfo);
	d.getElementById('info').style.transform = (isInfo) ? "translateY(0px)":"translateY(100%)";
	d.getElementById('buttonI').className = (isInfo) ? "active":"";
}

function toggleConsolePopOut() {
	// isInfo = !isInfo;
	// if (isInfo) populateInfo(lastinfo);
	// d.getElementById('info').style.transform = (isInfo) ? "translateY(0px)":"translateY(100%)";
	// d.getElementById('buttonI').className = (isInfo) ? "active":"";
}


function resetUtil() {
	// var cn = `<button class="btn btn-s btn-i rect" onclick="makeSeg()"><i class="icons btn-icon">&#xe18a;</i>Add segment</button><br>`;
	// d.getElementById('segutil').innerHTML = cn;
}


function setX(ind) {
	var obj = {"seg": {"fx": parseInt(ind)}};
	requestJson(obj);
}

function setPalette()
{
	var obj = {"seg": {"pal": parseInt(d.getElementById('selectPalette').value)}};
	requestJson(obj);
}

function setBri() {
	var obj = {"bri": parseInt(d.getElementById('sliderBri').value)};
	obj.transition = parseInt(d.getElementById('cyctt').value*10);
	requestJson(obj);
}

function setSpeed() {
	var obj = {"seg": {"sx": parseInt(d.getElementById('sliderSpeed').value)}};
	requestJson(obj, false);
}

function setIntensity() {
	var obj = {"seg": {"ix": parseInt(d.getElementById('sliderIntensity').value)}};
	requestJson(obj, false);
}

function setLor(i) {
	var obj = {"lor": i};
	requestJson(obj);
}

function toggleCY() {
	var obj = {"pl" : -1};
	if (d.getElementById('cyToggle').checked)
	{
		obj = {"pl": 0, "ccnf": {"min": parseInt(d.getElementById('cycs').value), "max": parseInt(d.getElementById('cyce').value), "time": parseInt(d.getElementById('cyct').value*10)}};
		obj.transition = parseInt(d.getElementById('cyctt').value*10);
	}
	
	requestJson(obj);
}

function togglePS() {
	ps = !ps;
	
	var btns = document.getElementsByClassName("psts");
	for (i = 0; i < btns.length; i++) {
		if (ps) {
			btns[i].className += " saving";
		} else {
			btns[i].className = btns[i].className.replace(" saving", "");
		}
	}
	
	d.getElementById("psLabel").innerHTML = (ps) ? "Save to slot":"Load from slot";
}

function setPreset(i) {
	var obj = {"ps": i}
	if ((savedPresets >> (i-1)) & 0x01) {
		showToast("Loading config from slot " + i +".");
	} else {
		showToast("Slot " + i +" is empty! Use saving mode to save the current config to it.");
	}
	if (ps) {
		obj = {"psave": i};
		showToast("Saving config to slot " + i +".");
	}
	requestJson(obj);
}

function selectSlot(b) {
	csel = b;
	var cd = d.getElementById('csl').children;
	for (i = 0; i < cd.length; i++) {
		cd[i].style.border="2px solid white";
		cd[i].style.margin="5px";
		cd[i].style.width="42px";
	}
	cd[csel].style.border="5px solid white";
	cd[csel].style.margin="2px";
	cd[csel].style.width="50px";
	// cpick.color.set(cd[csel].style.backgroundColor);
	d.getElementById('sliderW').value = whites[csel];
	updateTrail(d.getElementById('sliderW'));
	updateHex();
	updateRgb();
}

var lasth = 0;
function pC(col)
{
	if (col == "rnd")
	{
	col = {h: 0, s: 0, v: 100};
	col.s = Math.floor((Math.random() * 50) + 50);
	do {
		col.h = Math.floor(Math.random() * 360);
	} while (Math.abs(col.h - lasth) < 50);
	lasth = col.h;
	}
	// cpick.color.set(col);
	setColor(0);
}

function updateRgb()
{
	// var col = cpick.color.rgb;
	// var s = d.getElementById('sliderR');
	// s.value = col.r; updateTrail(s,1);
	// s = d.getElementById('sliderG');
	// s.value = col.g; updateTrail(s,2);
	// s = d.getElementById('sliderB');
	// s.value = col.b; updateTrail(s,3);
}

function updateHex()
{
	// var str = cpick.color.hexString;
	// str = str.substring(1);
	// var w = whites[csel];
	// if (w > 0) str += w.toString(16);
	// d.getElementById('hexc').value = str;
	// d.getElementById('hexcnf').style.backgroundColor = "var(--c-3)";
}

function hexEnter() {
	d.getElementById('hexcnf').style.backgroundColor = "var(--c-6)";
	if(event.keyCode == 13) fromHex();
}

function fromHex()
{
	var str = d.getElementById('hexc').value;
	console.log(str);
	whites[csel] = parseInt(str.substring(6), 16);
	// try {
	// 	cpick.color.set("#" + str.substring(0,6));
	// } catch (e) {
	// 	cpick.color.set("#ffaa00");
	// }
	if (isNaN(whites[csel])) whites[csel] = 0;
	setColor(2);
}

function fromRgb()
{
	var r = d.getElementById('sliderR').value;
	var g = d.getElementById('sliderG').value;
	var b = d.getElementById('sliderB').value;
	// cpick.color.set(`rgb(${r},${g},${b})`);
	setColor(0);
}

function setColor(sr) {
	var cd = d.getElementById('csl').children;
	// if (sr == 1 && cd[csel].style.backgroundColor == 'rgb(0, 0, 0)') cpick.color.setChannel('hsv', 'v', 100);
	cd[csel].style.backgroundColor = cpick.color.rgbString;
	if (sr != 2) whites[csel] = d.getElementById('sliderW').value;
	// var col = cpick.color.rgb;
	// var obj = {"seg": {"col": [[col.r, col.g, col.b, whites[csel]],[],[]]}};
	// if (csel == 1) {
	// 	obj = {"seg": {"col": [[],[col.r, col.g, col.b, whites[csel]],[]]}};
	// } else if (csel == 2) {
	// 	obj = {"seg": {"col": [[],[],[col.r, col.g, col.b, whites[csel]]]}};
	// }
	updateHex();
	updateRgb();
	obj.transition = parseInt(d.getElementById('cyctt').value*10);
	requestJson(obj);
}

function openGH()
{
	window.open("https://github.com/Aircoookie/WLED/wiki");
}

var cnfr = false;
function cnfReset()
{
	if (!cnfr)
	{
		var bt = d.getElementById('resetbtn');
	bt.style.color = "#f00";
	bt.innerHTML = "Confirm Reboot";
	cnfr = true; return;
	}
	window.location.href = "/reset";
}

var cnfrS = false;

function expand(i)
{
	expanded[i] = !expanded[i];
	// d.getElementById('seg' +i).style.display = (expanded[i]) ? "block":"none";
	// d.getElementById('sege' +i).style.transform = (expanded[i]) ? "rotate(180deg)":"rotate(0deg)"
}

function unfocusSliders() {
	d.getElementById("sliderBri").blur();
	d.getElementById("sliderSpeed").blur();
	d.getElementById("sliderIntensity").blur();
}

//sliding UI
const _C = document.querySelector('.container'), N = 4;

let iSlide = 0, x0 = null, y0 = null, scrollS = 0, locked = false, w;

function unify(e) {	return e.changedTouches ? e.changedTouches[0] : e }

function lock(e) {
	if (pcMode) return;
	var l = e.target.classList;
	if (l.contains('noslide') || l.contains('iro__wheel__saturation') || l.contains('iro__slider__value')	|| l.contains('iro__slider')) return;
	x0 = unify(e).clientX;
	y0 = unify(e).clientY;
	scrollS = d.getElementsByClassName("tabcontent")[iSlide].scrollTop;

	_C.classList.toggle('smooth', !(locked = true))
}

function drag(e) {
	if (!locked || pcMode) return;
	if (d.getElementsByClassName("tabcontent")[iSlide].scrollTop != scrollS) {
		move(e); return;
	}
			
	_C.style.setProperty('--tx', `${Math.round(unify(e).clientX - x0)}px`)
}

function move(e) {
	if(!locked || pcMode) return;
	var dx = unify(e).clientX - x0, s = Math.sign(dx), 
			f = +(s*dx/w).toFixed(2);

	if((iSlide > 0 || s < 0) && (iSlide < N - 1 || s > 0) && f > .12) {
		_C.style.setProperty('--i', iSlide -= s);
		f = 1 - f;
		updateTablinks(iSlide);
	}
	
	_C.style.setProperty('--tx', '0px');
	_C.style.setProperty('--f', f);
	_C.classList.toggle('smooth', !(locked = false));
	x0 = null
}

function size() { 
	w = window.innerWidth;
	var h = d.getElementById('top').clientHeight;
	sCol('--th', h + "px");
	sCol('--bh', d.getElementById('bot').clientHeight + "px");
	if (isLv) h -= 4;
	sCol('--tp', h + "px");
	togglePcMode();
}

function togglePcMode(fromB = false)
{
	if (fromB) {
	pcModeA = !pcModeA;
	localStorage.setItem('pcm', pcModeA);
	pcMode = pcModeA;
	}
	if (w < 1250 && !pcMode) return;
	if (!fromB && ((w < 1250 && lastw < 1250) || (w >= 1250 && lastw >= 1250))) return;
	openTab(0, true);
	if (w < 1250) {pcMode = false;}
	else if (pcModeA && !fromB) pcMode = pcModeA;
	updateTablinks(0);
	d.getElementById('buttonPcm').className = (pcMode) ? "active":"";
	d.getElementById('bot').style.height = (pcMode && !cfg.comp.pcmbot) ? "0":"auto";
	sCol('--bh', d.getElementById('bot').clientHeight + "px");
	if (pcMode)
	{
		_C.style.width = '100%';
	} else {
		_C.style.width = '400%';
	}
	lastw = w;
}

function isObject(item) {
	return (item && typeof item === 'object' && !Array.isArray(item));
}

function mergeDeep(target, ...sources) {
	if (!sources.length) return target;
	const source = sources.shift();

	if (isObject(target) && isObject(source)) {
		for (const key in source) {
			if (isObject(source[key])) {
				if (!target[key]) Object.assign(target, { [key]: {} });
				mergeDeep(target[key], source[key]);
			} else {
				Object.assign(target, { [key]: source[key] });
			}
		}
	}
	return mergeDeep(target, ...sources);
}

size();
_C.style.setProperty('--n', N);

window.addEventListener('resize', size, false);

_C.addEventListener('mousedown', lock, false);
_C.addEventListener('touchstart', lock, false);

_C.addEventListener('mousemove', drag, false);
_C.addEventListener('touchmove', drag, false);

_C.addEventListener('mouseout', move, false);
_C.addEventListener('mouseup', move, false);
_C.addEventListener('touchend', move, false);



function ShowMessageToast(message) {
  // Get the snackbar DIV
  var x = document.getElementById("snackbar");

  // Add the "show" class to DIV
  x.className = "show";
  x.innerHTML = message;

  // After 3 seconds, remove the show class from DIV
  setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
}


        // var json_url_list_object = {"/page_draw.json":-100,"/module_draw.json":-200,"/update_urls.json":-500}
        // var json_url_list_object = {"http://192.168.1.180/draw.json":-1,"http://192.168.1.180/update_urls.json":100}

        
        var json_url_list_object = {"/base_page_fill.json":-100,"/web_top_bar.json":1000};

        function TimeElapsed(t,e){
            var n=new Date();
            if(n-t>e){
                return 1;
            }
            return 0;
        }    
        var t=new Date();
        var tSaved_debug = new Date();
        var tSaved=[];
        var tf=0;
        var fl=[];
        var ps_count=0;
        var tURLfetch;
        function init_t(){
            for (var i=0;i<Object.keys(json_url_list_object).length;i++){
                tSaved[i] = t;fl[i]=1;
            }
        }
        function init_urls_for_page(){

            // var page_url_full = "http://192.168.1.1/";//window.location.href;
            var page_url_full2 = window.location.href;
            var page_url_full;
            // Remove any ? parts
            if(page_url_full2.includes("?")){
                var url_minus_values = page_url_full2.split("?");
                page_url_full = url_minus_values[0];
            }else{
                page_url_full = page_url_full2;
            }
            
            page_url_full = page_url_full.replace(/\?/g,"").replace(/PAGE/g,"").replace(/\./g,"");

            var page2 = page_url_full.split("http://");
            var page3 = page2[1].split("/");
            var hostname = page3[0];
            var pagename = page3[1].split("/");
            var page_url_start = page_url_full.split("/");
            var page_url_start2 = page_url_start[2];

            if(pagename == ""){               
                json_url_list_object["/page_draw.json"] = -1;
                json_url_list_object["/update_urls.json"] = -200;
            }else{                
                json_url_list_object["/" + pagename + "/page_draw.json"] = -1;
                json_url_list_object["/" + pagename + "/update_urls.json"] = -200;
            }

        }
        function execute_updated_urls(){
            init_t();
            URLfetch();       
        }
        function URLfetch(){
            Object.keys(json_url_list_object).forEach(function(u,i){
                
                var f=1,t=tSaved[i],r=json_url_list_object[u];

                if(r==0){
                    f=0;
                }
                if((r>0)&&(fl[i]==1)){
                    r=1000;
                }
                if(r<0){ console.log('r<0');
                    r*=-1;
                }
                
                if(f){
                    if(TimeElapsed(t,r)){
                        if(ps_count<4){
                            ps_count++;
                            var suc=fetchUwT(u);
                            if((suc==1)||(tf==1)){
                                fl[i]=0;
                            }else{}
                            if((json_url_list_object[u]<0)){ 
                                json_url_list_object[u]=0;
                            }else{console.log('new Date()');
                                tSaved[i]=new Date();
                            }
                        }
                    }
                }
            });
            clearTimeout(tURLfetch);
            tURLfetch = setTimeout(URLfetch,1);
        }
        var controller = new AbortController();
        var signal = controller.signal;
        function fetchUwT(u){
            new Promise((resolve,reject)=>{
                let timer = setTimeout(()=>{
                    reject(new Error('TO'));
                    controller.abort();
                    controller = new AbortController();
                    signal = controller.signal;
                    ps_count--;
                    tf=0;
                },3000);
            fetch(u,{method:'get',signal:signal,}).then((r)=>{
                if(u.includes('.json')){
                    return r.json();
                }else{
                    return r.text();
                }
            },err=>reject(err)).then((d)=>{
                ps_count--;
                if(u.includes('.json')){
                    Parse_JsonData(d);
                }else if(u.includes('.js')){
                    Parse_AddScript(d);
                }else if(u.includes('.css')){
                    Parse_AddStyle(d);
                }else{
                    console.log('u UNKNOWN',u);
                }
                tf=1;
            }).catch(function(err){tf=0;}).finally(
                function(){
                    clearTimeout(timer);
                });
            });
            return tf;
        }
        
        function ihr(x){
            var result = x.replace(/{o1}/g,"<option value='")
                .replace(/{o2}/g,"</option>")
                .replace(/{f1}/g,"<font color='")
                .replace(/{f2}/g,"</font>")
                .replace(/{sc}/g,"'style='color:#")
                .replace(/{sw}/g,"<td style='width:")
                .replace(/{bc}/g,"><button class=")
                .replace(/{bc2}/g,"</button></td>")
                .replace(/{t}/g,"<table style='width:100%'>")
                .replace(/{t2}/g,"</table>")
                .replace(/{oc}/g,"'onclick='")
                .replace(/{dc}/g,"<div class='")
                .replace(/}1/g,"</td></tr><tr><th>")
                .replace(/}2/g,"</th><td>");
            return result;
        }
        
        function Parse_JsonData(json){
            try{

                var json_object_length = Object.keys(json).length;
            
                for(c in json){

                    for(i=0;i<json[c].length;i++){
                        var id=0; 
                        if(json[c][i].hasOwnProperty('id')){
                            id=json[c][i].id;
                        }
                        if(json[c][i].hasOwnProperty('ih')){
                            document.getElementsByClassName(c)[id].innerHTML=json[c][i].ih;
                        }
                        if(json[c][i].hasOwnProperty('evl')){
                            document.getElementById(c).value=json[c][i].evl;
                        }
                        if(json[c][i].hasOwnProperty('ihr')){
                            document.getElementsByClassName(c)[id].innerHTML=ihr(json[c][i].ihr);
                        }
                        if(json[c][i].hasOwnProperty('eihr')){
                            document.getElementById(c).innerHTML=ihr(json[c][i].eihr);
                        }
                        if(json[c][i].hasOwnProperty('evl')){
                            document.getElementById(c).value=json[c][i].evl;
                        }
                        if(json[c][i].hasOwnProperty('bc')){
                            document.getElementsByClassName(c)[id].style.backgroundColor=json[c][i].bc;
                        }
                        if(json[c][i].hasOwnProperty('fc')){
                            document.getElementsByClassName(c)[id].style.color=json[c][i].fc;
                        }
                        if(json[c][i].hasOwnProperty('bclg')){
                            var s='linear-gradient(90deg,';
                            var l=json[c][i].bclg.length;
                            for(j=0;j<l;j++){
                                s+='#'+json[c][i].bclg[j];
                                if(j<l-1){s+=','}
                            }
                            s+=')';
                            document.getElementsByClassName(c)[id].style.background=s;
                        }
                        if(json[c][i].hasOwnProperty('bcbl')){
                            var s='linear-gradient(90deg,';
                            var l=json[c][i].bcbl.length;
                            var ld,pos;
                            for(j=0;j<l;j++){
                                ld=json[c][i].bcbl[j];
                                pos=(j+1)*100/l;
                                s+='#'+ld+' 0,#'+ld+' '+pos+'%';
                                if(j<l-1){
                                    s+=','
                                }
                            }
                            s+=')';
                            document.getElementsByClassName(c)[id].style.background=s;
                        }
                        if(json[c][i].hasOwnProperty('function')){
                            if(json[c][i].hasOwnProperty('Parse_AddScript')){
                                Parse_AddScript(json[c][i].Parse_AddScript);
                            }
                            if(json[c][i].hasOwnProperty('Parse_Urls')){
                                Parse_Urls(json.function.Parse_Urls);
                            }
                            if(json[c][i].hasOwnProperty('Append_Parse_Urls')){
                                Append_Parse_Urls(json.function.Append_Parse_Urls);
                            }
                            if(json[c][i].hasOwnProperty('SetTitle')){
                                Parse_Urls(json.function.Parse_Urls);
                                var newTitle = json.function.SetTitle;
                                if (document.title != newTitle) {
                                    document.title = newTitle;
                                }
                                //$('meta[name="description"]').attr("content", newDescription);
                            }
                            
                        }
                }
                 if(c=='function'){
                     console.log('PHASE OUT c==function, json[c][0',json[c][0]);
                    try{
                        if(json[c][0].hasOwnProperty('Parse_AddScript')){
                            Parse_AddScript(json[c][0].Parse_AddScript);
                        }
                    }catch(err) {
                        // ShowMessageToast(err.message);
                    }
                     if(json[c].hasOwnProperty('Parse_Urls')){
                         Parse_Urls(json.function.Parse_Urls);
                     }
                     if(json[c].hasOwnProperty('Append_Parse_Urls')){
                         Append_Parse_Urls(json.function.Append_Parse_Urls);
                     }
                     if(json[c].hasOwnProperty('SetTitle')){
                          Parse_Urls(json.function.Parse_Urls);
                         var newTitle = json.function.SetTitle;
                         if (document.title != newTitle) {
                             document.title = newTitle;
                         }
                         //$('meta[name="description"]').attr("content", newDescription);
                     }
                }
            }


            }catch(err) {
                ShowMessageToast(err.message);
                console.log(err);
                // document.getElementsByClassName("container_1")[0].innerHTML = err.message;
            }
        }
        function Parse_AddStyle(d){
            var s=document.createElement('style');
            s.innerHTML = d;
            document.head.appendChild(s);
        }
        function Parse_AddScript(d){ //start of parse json
            var s=document.createElement('script'); //s = script
            s.innerHTML = d;
            document.head.appendChild(s);
        }
        function Parse_Urls(d){
            var keys = Object.keys(d);
            var url_list_json_object = d;            
            for(url in d){
                json_url_list_object[url] = d[url];
            }
            execute_updated_urls();
        }
        function Edit_Url_Speed(d){
            var url_list_json_object = d;            
            for(url in d){
                json_url_list_object[url] = d[url];
            }
            execute_updated_urls();
        }
        function Append_Parse_Urls(d){
            json_url_list_object = json_url_list_object + d;
        }
        var os1;
        function send_select(url,mess){
            var xhr = new XMLHttpRequest();
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var json = JSON.parse(xhr.responseText);
                    console.log('response',json);
                }
            };
            var data = JSON.stringify({"email": "hey@mail.com"});
            xhr.send(data);
        }
        
        function send_value(id){
            var p=document.getElementById(id).value;
            la('&'+id+'='+p);
        }
        var x=null,lt,to,tp,pc='';
        function eb(s){
            return document.getElementById(s);
        }
        function wl(f){
            window.addEventListener('load',f);
        }
        function qs(s){
            return document.querySelector(s);
        }
        function start(p){
            la(p);
            init_urls_for_page();
            execute_updated_urls();            
        }

        function start_form_listener(){
            
            var form = document.getElementById("json_command_form");

            if(form){
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    var object = {};
                    const formData = new FormData(form);
                    formData.forEach(function(value, key){
                        //multi level
                        if(key.includes(",")){
                            console.log('multilevel');
                            var new_key = key.split(',');
                            var subobject = {};
                            //check if it exists, then append
                            if(object[new_key[0]]){
                                console.log('multilevel key existed');
                                var old_object = object[new_key[0]];
                                old_object[new_key[1]] = value;                    
                                object[new_key[0]] = old_object;
                            }else{
                                subobject[new_key[1]] = value;                       
                                object[new_key[0]] = subobject;
                            }
                        }else{                        
                            console.log('singlelevel');
                            object[key] = value;
                        }
                    });
                    var json2 = JSON.stringify(object);
                    xhr.open(form.method, form.action, true);
                    xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                    xhr.send(json2);
                });
            }
        }

        function la(p){
            var a=' ';
            if(la.arguments.length==1){
                a=p;
                clearTimeout(lt);
            }
            if(x!=null){
                x.abort();
            }
            x=new XMLHttpRequest();
            x.onreadystatechange=function(){
                if(x.readyState==4&&x.status==200){
                    var s=x.responseText.replace(/{t}/g,"<table style='width:100%'>")
                                        .replace(/{s}/g,"<tr><th>")
                                        .replace(/{m}/g,"</th><td>")
                                        .replace(/{e}/g,"</td></tr>")
                                        .replace(/{t2}/g,"</table>")
                                        .replace(/{c}/g,"%'><div style='text-align:center;font-weight:");
                    eb('l1').innerHTML=s;
                }
            };
            x.open('GET','./?m=1'+a,true);
            x.send();
            lt=setTimeout(la,5000);
        }
        function lb(p){
            la('&d='+p);
        }
        function lc(p){
            la('&t='+p);
        }
        function lc2(v,i,p){
            if(eb('s')){
                if(v=='h'||v=='d'){
                    var sl=eb('sl4').value;eb('s').style.background='linear-gradient(to right,rgb('+sl+'%%,'+sl+'%%,'+sl+'%%),hsl('+eb('sl2').value+',100%%,50%%))';
                }
            }
            la('&'+v+i+'='+p);
        }
        function lc3(v,p){
            if(eb('s')){
                if(v=='h'||v=='d'){
                    var sl=eb('sl4').value;eb('s').style.background='linear-gradient(to right,rgb('+sl+'%%,'+sl+'%%,'+sl+'%%),hsl('+eb('sl2').value+',100%%,50%%))';
                }
            }
            la('&'+v+'='+p);
        }

        window.onload=start(0);
    </script>
    </body>
</html>